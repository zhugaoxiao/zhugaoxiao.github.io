<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />








  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>


    <meta name="description" content="大自然的搬运工" />



  <meta name="keywords" content="mariadb,openstack,rabbitmq," />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description" content="参考：Chapter 2. Basic environment">
<meta property="og:type" content="article">
<meta property="og:title" content="openstack之kilo安装 基础环境">
<meta property="og:url" content="zhugaoxiao.github.io/2015/10/24/openstack-Basic-environment/index.html">
<meta property="og:site_name" content="高校的小站">
<meta property="og:description" content="参考：Chapter 2. Basic environment">
<meta property="og:image" content="http://docs.openstack.org/kilo/install-guide/install/yum/content/figures/1/a/common/figures/installguidearch-neutron-networks.png">
<meta property="og:updated_time" content="2015-11-10T12:09:15.582Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="openstack之kilo安装 基础环境">
<meta name="twitter:description" content="参考：Chapter 2. Basic environment">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'hide'
  };
</script>

  <title> openstack之kilo安装 基础环境 | 高校的小站 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  



  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">高校的小站</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            <i class="menu-item-icon icon-next-categories"></i> <br />
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            <i class="menu-item-icon icon-next-about"></i> <br />
            关于
          </a>
        </li>
      

      
      
    </ul>
  

  
    <div class="site-search">
      
  
  <form class="site-search-form">
    <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
  </form>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'CzK1KgsZV7UDQV2N5maz','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 

  <div id="posts" class="posts-expand">
    

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              openstack之kilo安装 基础环境
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-10-24T00:00:00+08:00" content="2015-10-24">
            2015-10-24
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/openstack/" itemprop="url" rel="index">
                  <span itemprop="name">openstack</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/10/24/openstack-Basic-environment/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/24/openstack-Basic-environment/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><blockquote>
<p>参考：<a href="http://docs.openstack.org/kilo/install-guide/install/yum/content/ch_basic_environment.html#basics-prerequisites" target="_blank" rel="external">Chapter 2. Basic environment</a></p>
</blockquote>
<a id="more"></a>
<h1 id="Before_you_begin">Before you begin</h1><ul>
<li>配置 stack 用户<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line">#</span><br><span class="line">sudo groupadd <span class="keyword">stack</span></span><br><span class="line">sudo useradd -<span class="keyword">g</span> <span class="keyword">stack</span> -s /bin/bash  -<span class="keyword">m</span> <span class="keyword">stack</span></span><br><span class="line">#添加 <span class="keyword">stack</span> 用户权限。</span><br><span class="line">sudo echo <span class="string">"stack ALL=(ALL) NOPASSWD: ALL"</span> &gt;&gt; /etc/sudoers</span><br><span class="line">#切换到 <span class="keyword">stack</span> 用户</span><br><span class="line">sudo <span class="keyword">su</span> - <span class="keyword">stack</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="Security">Security</h1><h1 id="Networking">Networking</h1><ul>
<li>OpenStack Networking (neutron)<br>The example architecture with OpenStack Networking (neutron) requires one controller node, one network node, and at least one compute node. The controller node contains one network interface on the management network. The network node contains one network interface on the management network, one on the instance tunnels network, and one on the external network. The compute node contains one network interface on the management network and one on the instance tunnels network.</li>
</ul>
<p>The example architecture assumes use of the following networks:</p>
<p>Management on 10.0.0.0/24 with gateway 10.0.0.1</p>
<blockquote>
<p>[Note]    Note<br>This network requires a gateway to provide Internet access to all nodes for administrative purposes such as package installation, security updates, DNS, and NTP.</p>
</blockquote>
<p>Instance tunnels on 10.0.1.0/24 without a gateway</p>
<blockquote>
<p>[Note]    Note<br>This network does not require a gateway because communication only occurs among network and compute nodes in your OpenStack environment.</p>
</blockquote>
<p>External on 203.0.113.0/24 with gateway 203.0.113.1</p>
<blockquote>
<p>[Note]    Note<br>This network requires a gateway to provide Internet access to instances in your OpenStack environment.</p>
</blockquote>
<p>You can modify these ranges and gateways to work with your particular network infrastructure.</p>
<p>Minimal architecture example with OpenStack Networking (neutron)—Network layout<br><img src="http://docs.openstack.org/kilo/install-guide/install/yum/content/figures/1/a/common/figures/installguidearch-neutron-networks.png" alt=""></p>
<ul>
<li>控制节点</li>
</ul>
<figure class="highlight vala"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor">#</span></span><br><span class="line">hostnamectl <span class="keyword">set</span>-hostname controller --<span class="keyword">static</span></span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor">#</span></span><br><span class="line">cat &lt;&lt;EOF &gt; /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line">DEVICE=eth0</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">ONBOOT=yes</span><br><span class="line">NM_CONTROLLED=no</span><br><span class="line">BOOTPROTO=<span class="keyword">static</span></span><br><span class="line">IPADDR=<span class="number">10.0</span><span class="number">.0</span><span class="number">.11</span></span><br><span class="line">NETMASK=<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor">#</span></span><br><span class="line">cat &lt;&lt;EOF &gt;&gt; /etc/hosts</span><br><span class="line"><span class="preprocessor"># controller</span></span><br><span class="line"><span class="number">10.0</span><span class="number">.0</span><span class="number">.11</span>       controller</span><br><span class="line"><span class="preprocessor"># network</span></span><br><span class="line"><span class="number">10.0</span><span class="number">.0</span><span class="number">.21</span>       network</span><br><span class="line"><span class="preprocessor"># compute1</span></span><br><span class="line"><span class="number">10.0</span><span class="number">.0</span><span class="number">.31</span>       compute1</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p>ip addr | grep ^2: |awk -F “:” ‘{print$2}’ | awk -F “ “ ‘{print$1}’</p>
<ul>
<li>网络节点</li>
</ul>
<figure class="highlight vala"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor">#</span></span><br><span class="line">hostnamectl <span class="keyword">set</span>-hostname network --<span class="keyword">static</span></span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor">#Management network</span></span><br><span class="line">cat &lt;&lt;EOF &gt; /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line">DEVICE=eth0</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">ONBOOT=yes</span><br><span class="line">NM_CONTROLLED=no</span><br><span class="line">BOOTPROTO=<span class="keyword">static</span></span><br><span class="line">IPADDR=<span class="number">10.0</span><span class="number">.0</span><span class="number">.21</span></span><br><span class="line">NETMASK=<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span></span><br><span class="line">EOF</span><br><span class="line"><span class="preprocessor">#Tunnel network</span></span><br><span class="line">cat &lt;&lt;EOF &gt; /etc/sysconfig/network-scripts/ifcfg-eth1</span><br><span class="line">DEVICE=eth1</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">ONBOOT=yes</span><br><span class="line">NM_CONTROLLED=no</span><br><span class="line">BOOTPROTO=<span class="keyword">static</span></span><br><span class="line">IPADDR=<span class="number">10.0</span><span class="number">.1</span><span class="number">.21</span></span><br><span class="line">NETMASK=<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span></span><br><span class="line">EOF</span><br><span class="line"><span class="preprocessor">#Set hosts</span></span><br><span class="line">cat &lt;&lt;EOF &gt;&gt; /etc/hosts</span><br><span class="line"><span class="preprocessor"># controller</span></span><br><span class="line"><span class="number">10.0</span><span class="number">.0</span><span class="number">.11</span>       controller</span><br><span class="line"><span class="preprocessor"># network</span></span><br><span class="line"><span class="number">10.0</span><span class="number">.0</span><span class="number">.21</span>       network</span><br><span class="line"><span class="preprocessor"># compute1</span></span><br><span class="line"><span class="number">10.0</span><span class="number">.0</span><span class="number">.31</span>       compute1</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p>The external interface uses a special configuration without an IP address assigned to it. Configure the third interface as the external interface:</p>
<p>Replace INTERFACE_NAME with the actual interface name. For example, eth2 or ens256.</p>
<p>Edit the /etc/sysconfig/network-scripts/ifcfg-INTERFACE_NAME file to contain the following:<br><figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="comment">#External network</span></span><br><span class="line">cat &lt;&lt;EOF &gt; /etc/sysconfig/network-scripts/ifcfg-eth2</span><br><span class="line"><span class="constant">DEVICE</span>=eth2</span><br><span class="line"><span class="constant">TYPE</span>=Ethernet</span><br><span class="line"><span class="constant">ONBOOT</span>=yes</span><br><span class="line"><span class="constant">BOOTPROTO</span>=none</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></p>
<ul>
<li>计算节点</li>
</ul>
<figure class="highlight vala"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor">#</span></span><br><span class="line">hostnamectl <span class="keyword">set</span>-hostname compute1 --<span class="keyword">static</span></span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor">#Management network</span></span><br><span class="line">cat &lt;&lt;EOF &gt; /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line">DEVICE=eth0</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">ONBOOT=yes</span><br><span class="line">NM_CONTROLLED=no</span><br><span class="line">BOOTPROTO=<span class="keyword">static</span></span><br><span class="line">IPADDR=<span class="number">10.0</span><span class="number">.0</span><span class="number">.31</span></span><br><span class="line">NETMASK=<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span></span><br><span class="line">EOF</span><br><span class="line"><span class="preprocessor">#Tunnel network</span></span><br><span class="line">cat &lt;&lt;EOF &gt; /etc/sysconfig/network-scripts/ifcfg-eth1</span><br><span class="line">DEVICE=eth1</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">ONBOOT=yes</span><br><span class="line">NM_CONTROLLED=no</span><br><span class="line">BOOTPROTO=<span class="keyword">static</span></span><br><span class="line">IPADDR=<span class="number">10.0</span><span class="number">.1</span><span class="number">.31</span></span><br><span class="line">NETMASK=<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span></span><br><span class="line">EOF</span><br><span class="line"><span class="preprocessor">#Storage network</span></span><br><span class="line">cat &lt;&lt;EOF &gt; /etc/sysconfig/network-scripts/ifcfg-eth2</span><br><span class="line">DEVICE=eth2</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">ONBOOT=yes</span><br><span class="line">NM_CONTROLLED=no</span><br><span class="line">BOOTPROTO=<span class="keyword">static</span></span><br><span class="line">IPADDR=<span class="number">10.0</span><span class="number">.2</span><span class="number">.31</span></span><br><span class="line">NETMASK=<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span></span><br><span class="line">EOF</span><br><span class="line"><span class="preprocessor">#Set hosts</span></span><br><span class="line">cat &lt;&lt;EOF &gt;&gt; /etc/hosts</span><br><span class="line"><span class="preprocessor"># controller</span></span><br><span class="line"><span class="number">10.0</span><span class="number">.0</span><span class="number">.11</span>       controller</span><br><span class="line"><span class="preprocessor"># network</span></span><br><span class="line"><span class="number">10.0</span><span class="number">.0</span><span class="number">.21</span>       network</span><br><span class="line"><span class="preprocessor"># compute1</span></span><br><span class="line"><span class="number">10.0</span><span class="number">.0</span><span class="number">.31</span>       compute1</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h1 id="Network_Time_Protocol_(NTP)">Network Time Protocol (NTP)</h1><figure class="highlight vala"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor">#修改时区</span></span><br><span class="line">timedatectl <span class="keyword">set</span>-timezone Asia/Shanghai</span><br><span class="line"><span class="preprocessor">#否打开NTP选项</span></span><br><span class="line">timedatectl <span class="keyword">set</span>-ntp yes</span><br></pre></td></tr></table></figure>
<h1 id="OpenStack_packages">OpenStack packages</h1><ul>
<li><p>配置epel源</p>
<figure class="highlight crystal"><table><tr><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line">curl -o /etc/yum.repos.d/epel7.repo <span class="symbol">http:</span>/<span class="regexp">/192.178.102.249/help</span><span class="regexp">/epel7.repo</span><br><span class="line">curl -o /etc</span><span class="regexp">/yum.repos.d/epel</span>.repo <span class="symbol">http:</span>/<span class="regexp">/mirrors.aliyun.com/repo</span><span class="regexp">/epel-7.repo</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>配置openstack源</p>
<figure class="highlight crystal"><table><tr><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line">curl -o /etc/yum.repos.d/openstack-kilo.repo <span class="symbol">http:</span>/<span class="regexp">/192.178.102.249/help</span><span class="regexp">/openstack-kilo.repo</span><br><span class="line">yum install -y http:/</span><span class="regexp">/rdo.fedorapeople.org/openstack</span>-kilo/rdo-release-kilo.rpm</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装open-vm-tools<br>我的底层环境使用vsphere esxi5.5 u2，为了更好的体验，安装vmware建议的open-vm-tools客户端工具，cenots 7已经集成进epel源，直接安装即可。</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line">yum <span class="keyword">install</span> -y open-vm-tools</span><br></pre></td></tr></table></figure>
</li>
<li><p>另外两个事情<br>更新系统到最新</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="title">yum</span> upgrade -y</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>注意<br>If the upgrade process includes a new kernel, reboot your system to activate it.</p>
</blockquote>
<p>RHEL 和 CentOS 默认启用SELinux 。安装openstack-selinux 包来对OpenStack 服务相关的安全策略自动管理。<br><figure class="highlight vala"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor">#</span></span><br><span class="line">yum install -y openstack-selinux</span><br><span class="line"><span class="preprocessor">#或者关闭selinux</span></span><br><span class="line">setenforce <span class="number">0</span></span><br><span class="line">sed -i <span class="string">"s/\(^SELINUX=\).*\$/\1disabled/"</span> /etc/selinux/config</span><br></pre></td></tr></table></figure></p>
<h1 id="SQL_database">SQL database</h1><p>大部分OpenStack服务使用数据库存储信息。一般在控制节点安装。支持MariaDB、MySQL其他分支和PostgreSQL。</p>
<figure class="highlight armasm"><table><tr><td class="code"><pre><span class="line">#</span><br><span class="line"><span class="label">yum</span> install -y <span class="keyword">mariadb </span><span class="keyword">mariadb-server </span>MySQL-python</span><br></pre></td></tr></table></figure>
<p>生成数据库配置文件，记得配置绑定地址到控制节点的管理网络IP以便其他节点可以通过管理网络访问。<br><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">#</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"</span><br><span class="line"></span>[mysqld]</span><br><span class="line">bind-address = controller</span><br><span class="line">default-storage-engine = innodb</span><br><span class="line">innodb_file_per_table</span><br><span class="line">collation-server = utf8_general_ci</span><br><span class="line">init-connect = <span class="string">'SET NAMES utf8'</span></span><br><span class="line">character-<span class="keyword">set</span>-server = utf8" &gt;/etc/my.<span class="keyword">cnf</span>.<span class="keyword">d</span>/mariadb_openstack.<span class="keyword">cnf</span></span><br></pre></td></tr></table></figure></p>
<p>启动数据库服务并配置开机自启动。<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line">systemctl <span class="built_in">enable</span> mariadb.service</span><br><span class="line">systemctl start mariadb.service</span><br></pre></td></tr></table></figure></p>
<p>对数据库进行安全加固，设置root密码，访问权限，移除测试库。<br><figure class="highlight vala"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor">#</span></span><br><span class="line">mysql_secure_installation</span><br></pre></td></tr></table></figure></p>
<p>配置防火墙，允许 MySql service 通过:<br><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line">firewall-<span class="built_ins">cmd</span> --permanent --<span class="built_ins">add</span>-service=mysql</span><br><span class="line">firewall-<span class="built_ins">cmd</span> --reload</span><br></pre></td></tr></table></figure></p>
<h1 id="Message_queue">Message queue</h1><p>OpenStack uses a message queue to coordinate operations and status information among services. The message queue service typically runs on the controller node. OpenStack supports several message queue services including RabbitMQ, Qpid, and ZeroMQ. However, most distributions that package OpenStack support a particular message queue service. This guide implements the RabbitMQ message queue service because most distributions support it. If you prefer to implement a different message queue service, consult the documentation associated with it.</p>
<p>安装：<br><figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor">#</span></span><br><span class="line">yum install -y rabbitmq-<span class="keyword">server</span></span><br></pre></td></tr></table></figure></p>
<p>启动并配置开机自启动：<br><figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor">#</span></span><br><span class="line">systemctl enable rabbitmq-<span class="keyword">server</span>.service</span><br><span class="line">systemctl start rabbitmq-<span class="keyword">server</span>.service</span><br></pre></td></tr></table></figure></p>
<p>添加 openstack 用户:<br><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="title">rabbitmqctl</span> add_user openstack RABBIT_PASS</span><br></pre></td></tr></table></figure></p>
<p>修改 RABBIT_PASS 为你想设置的密码，这里我改了。</p>
<p>给openstack配置读写权限:<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line">rabbitmqctl <span class="built_in">set</span>_permissions openstack <span class="string">".*"</span> <span class="string">".*"</span> <span class="string">".*"</span></span><br></pre></td></tr></table></figure></p>
</span>
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/mariadb/" rel="tag">#mariadb</a>
          
            <a href="/tags/openstack/" rel="tag">#openstack</a>
          
            <a href="/tags/rabbitmq/" rel="tag">#rabbitmq</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/10/25/openstack-Identity-service/" rel="prev">openstack之kilo安装 认证服务</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/10/23/trans-It's the community,stupid/" rel="next">翻译：傻瓜，社区才是关键啊!</a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

 </div>

        

        
          <div class="comments" id="comments">
            
              <div class="ds-thread" data-thread-key="2015/10/24/openstack-Basic-environment/"
                   data-title="openstack之kilo安装 基础环境" data-url="zhugaoxiao.github.io/2015/10/24/openstack-Basic-environment/">
              </div>
            
          </div>
        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="https://avatars2.githubusercontent.com/u/7880839?v=3&s=460" alt="zhugaoxiao" itemprop="image"/>
          <p class="site-author-name" itemprop="name">zhugaoxiao</p>
        </div>
        <p class="site-description motion-element" itemprop="description">大自然的搬运工</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">44</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">7</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">40</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/zhugaoxiao" target="_blank">github</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/unodba" target="_blank">twitter</a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Before_you_begin"><span class="nav-number">1.</span> <span class="nav-text">Before you begin</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Security"><span class="nav-number">2.</span> <span class="nav-text">Security</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Networking"><span class="nav-number">3.</span> <span class="nav-text">Networking</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Network_Time_Protocol_(NTP)"><span class="nav-number">4.</span> <span class="nav-text">Network Time Protocol (NTP)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#OpenStack_packages"><span class="nav-number">5.</span> <span class="nav-text">OpenStack packages</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SQL_database"><span class="nav-number">6.</span> <span class="nav-text">SQL database</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Message_queue"><span class="nav-number">7.</span> <span class="nav-text">Message queue</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </section>
      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2015</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhugaoxiao</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"zhugaoxiao"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     

    
  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.1" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 0.4 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    var $tocContent = $('.post-toc-content');
    if (isDesktop() && CONFIG.sidebar === 'post') {
      if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
        displaySidebar();
      }
    }
  });
</script>



  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
